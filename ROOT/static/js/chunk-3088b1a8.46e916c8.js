(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3088b1a8"],{"09b5":function(e,t,i){"use strict";i.r(t);var n=i("20ed"),a=i.n(n);for(var l in n)["default"].indexOf(l)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(l);t["default"]=a.a},"20ed":function(e,t,i){"use strict";var n=i("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("7514"),i("242a");n(i("b775"));var a=n(i("1157")),l=(i("5c96"),n(i("c4e0"))),r={name:"dimFilter",props:["columnType","analysisRegionId","dimId","dimName","inId","sup","filterJson","filter","filterList","analysisList"],components:{myquerybuilder:l.default},data:function(){return{activeName:"convention",isLoadQueryBuilder:!1,queryRules:{},queryBuilderJson:{},inputselectvalue:[],inDimFilterSearch:"",loading:!1}},mounted:function(){},created:function(){this.initData(),this.initColData()},methods:{initData:function(){var e=this.filterJson;""===e&&(this.activeName="convention"),""!=e&&"1"!=e&&(this.activeName="filter"),"1"==e&&(this.activeName="convention")},handleClick:function(){},closeDialog:function(){this.$emit("closeFilterDialog")},initColData:function(){this.loading=!0;var e=this,t=this.dimName,i=(this.filterJson,this.filter,this.analysisList,this.analysisRegionId),n=[],l=[];a.default.each(this.analysisList,(function(e,t){null!=t&&t.id==i&&(n=t.objInList,l=t.objDimList)}));var r=this.contextUrl+"/indicatrixAnalysis/getColDataIn";a.default.post(r,{inMeasures:JSON.stringify(n),listDim:JSON.stringify(l),inId:this.dimId,columnName:t},(function(t){if(t.isError)e.$message({type:"error",message:t.message});else{(0,a.default)("#dimColData").html("");var i=e.filterList,n=[];a.default.each(t.result,(function(t,l){var r={id:l,name:l,outputColumnName:l};e.inputselectvalue.push(r),n.push(r);var s=e.getuuid(),c="<tr id='"+s+"'></tr>";(0,a.default)("#dimColData").append(c);for(var o=0;o<2;o++)if(0==o){var u="";u=void 0!=i&&i.indexOf(l)>-1?"<td style='padding-top: 5px;'><input type='checkbox' click='checkOnClick(this)' checked='checked' id='"+l+"'></td>":"<td style='padding-top: 5px;'><input type='checkbox' click='checkOnClick(this)' id='"+l+"'></td>",(0,a.default)("#"+s).append(u)}else{u="<td style='width: 100%;padding: 4px;'>"+l+"</td>";(0,a.default)("#"+s).append(u)}})),e.setQueryBuilderColumn(),"filter"===e.activeName&&(e.queryBuilderJson=JSON.parse(e.filterJson)),e.isLoadQueryBuilder=!0,e.loading=!1}}),"json")},sortNumber:function(e,t){return e-t},checkOnClick:function(e){alert(123);var t=(0,a.default)(e).attr("checked");void 0==t?(0,a.default)(e).attr("checked","checked"):(0,a.default)(e).removeAttr("checked")},enter:function(){var e=this.inId,t=this.sup,i=this.dimName,n=this.analysisRegionId;if("convention"==this.activeName){var l="",r=[];if((0,a.default)("#dimColData").find("tr").each((function(){var e=(0,a.default)(this).children().find("input[type='checkbox']"),t=((0,a.default)(this).css("display"),e.prop("checked"));if("checked"==t||1==t){var i=(0,a.default)(this).children("td").eq(1).text();l+="'"+i+"',",r.push(i)}})),0!=r.length&&(l=l.substring(0,l.length-1),l="{0} in ({1})".format(this.dimId,l)),""===l)return void this.$message({type:"info",message:"您选择的是常规，请选择条件"});this.$emit("dimSetFilter",n,l,e,this.dimId,t,JSON.stringify(1),r,i),this.closeDialog()}if("filter"==this.activeName){var s=this.$refs.myQueryBuilder.getSelectSql();if(null==s||""===s)return void this.$message({type:"info",message:"您选择的是条件，请输入条件设置"});var c=s.queryJson;this.$emit("dimSetFilter",n,s.sql,e,this.dimId,t,JSON.stringify(c,null,2),[],i),this.closeDialog()}},isNoSelect:function(e){e?(0,a.default)("input:checkbox").prop("checked","checked"):(0,a.default)("input:checkbox").prop("checked","")},setQueryBuilderColumn:function(){var e=[],t={columnType:"varchar"};t.columnName=this.dimName,e.push(t),this.queryRules.columnList=e}}};t.default=r},"23b7":function(e,t,i){},"39ec4":function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return a}));var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-container",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"正在加载数据中..."}},[i("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"常规",name:"convention"}},[i("div",{staticStyle:{height:"500px"},attrs:{id:"convention"}},[i("el-input",{attrs:{id:"inMeasureFilterSearch",placeholder:"请输入搜索条件"},on:{input:function(t){return e.searchOnChange()}},model:{value:e.inDimFilterSearch,callback:function(t){e.inDimFilterSearch=t},expression:"inDimFilterSearch"}}),i("div",{staticStyle:{height:"400px","overflow-y":"auto",cursor:"pointer"}},[i("table",{attrs:{id:"dimColData"}})]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.isNoSelect(!0)}}},[e._v("全选")]),i("el-button",{attrs:{type:"default"},on:{click:function(t){return e.isNoSelect(!1)}}},[e._v("取消全选")])],1)]),i("el-tab-pane",{attrs:{label:"条件",name:"filter"}},[e.isLoadQueryBuilder?i("myquerybuilder",{ref:"myQueryBuilder",attrs:{columns:e.queryRules,data:e.queryBuilderJson,inputselectvalue:e.inputselectvalue}}):e._e()],1)],1),i("el-footer",[i("div",{staticStyle:{float:"right"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.enter}},[e._v("确定")]),i("el-button",{attrs:{type:"primary"},on:{click:e.closeDialog}},[e._v("取消")])],1)])],1)},a=[]},"93d8":function(e,t,i){"use strict";i.r(t);var n=i("39ec4"),a=i("09b5");for(var l in a)["default"].indexOf(l)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(l);i("9c07");var r=i("0c7c"),s=Object(r["a"])(a["default"],n["a"],n["b"],!1,null,"298dd196",null);t["default"]=s.exports},"9c07":function(e,t,i){"use strict";i("23b7")}}]);
function Dialog(t,e,i,n,r,a,l,o,s){var h=0;mxClient.IS_VML&&(null==document.documentMode||document.documentMode<8)&&(h=80),i+=h,n+=h;var d=document.documentElement.clientHeight>0?document.documentElement.clientHeight:Math.max(document.body.clientHeight||0,document.documentElement.clientHeight),c=Math.max(1,Math.round((document.body.clientWidth-i-64)/2)),p=Math.max(1,Math.round((d-n)/3));mxClient.IS_QUIRKS||(e.style.maxHeight="100%"),i=Math.min(i,document.body.scrollWidth-64),n=Math.min(n,d-64),t.dialogs.length>0&&(this.zIndex+=2*t.dialogs.length),null==this.bg&&(this.bg=t.createDiv("background"),this.bg.style.position="absolute",this.bg.style.background=Dialog.backdropColor,this.bg.style.height=d+"px",this.bg.style.right="0px",this.bg.style.zIndex=this.zIndex-2,mxUtils.setOpacity(this.bg,this.bgOpacity),mxClient.IS_QUIRKS&&new mxDivResizer(this.bg));var g=mxUtils.getDocumentScrollOrigin(document);this.bg.style.left=g.x+"px",this.bg.style.top=g.y+"px",c+=g.x,p+=g.y,r&&document.body.appendChild(this.bg);var u=t.createDiv(s?"geTransDialog":"geDialog"),m=this.getPosition(c,p,i,n);c=m.x,p=m.y,u.style.width=i+"px",u.style.height=n+"px",u.style.left=c+"px",u.style.top=p+"px",u.style.zIndex=this.zIndex,u.appendChild(e),document.body.appendChild(u),!o&&e.clientHeight>u.clientHeight-64&&(e.style.overflowY="auto"),this.onDialogClose=l,this.container=u,t.editor.fireEvent(new mxEventObject("showDialog"))}Editor=function(t,e,i){mxEventSource.call(this),this.graph=i||this.createGraph(t,e),this.undoManager=this.createUndoManager(),this.graphChangeListener=function(t,e){var i=null!=e?e.getProperty("edit"):null;null!=i&&i.ignoreEdit||this.setModified(!0)},this.graph.getModel().addListener(mxEvent.CHANGE,mxUtils.bind(this,function(){this.graphChangeListener.apply(this,arguments)})),this.graph.resetViewOnRootChange=!1},Editor.ctrlKey=mxClient.IS_MAC?"Cmd":"Ctrl",mxUtils.extend(Editor,mxEventSource),Editor.prototype.extendCanvas=!0,Editor.prototype.chromeless=!1,Editor.prototype.cancelFirst=!0,Editor.prototype.enabled=!0,Editor.prototype.filename=null,Editor.prototype.modified=!1,Editor.prototype.autosave=!0,Editor.prototype.initialTopSpacing=0,Editor.prototype.appName=document.title,Editor.prototype.isChromelessView=function(){return this.chromeless},Editor.prototype.createGraph=function(t,e){var i=new Graph(null,e,null,null,t);return i.transparentBackground=!1,i},Editor.prototype.resetGraph=function(){this.graph.gridEnabled=!this.isChromelessView()||"1"==urlParams.grid,this.graph.graphHandler.guidesEnabled=!0,this.graph.setTooltips(!0),this.graph.setConnectable(!0),this.graph.foldingEnabled=!0,this.graph.scrollbars=this.graph.defaultScrollbars,this.graph.pageVisible=this.graph.defaultPageVisible,this.graph.pageBreaksVisible=this.graph.pageVisible,this.graph.preferPageSize=this.graph.pageBreaksVisible,this.graph.background=null,this.graph.pageScale=mxGraph.prototype.pageScale,this.graph.pageFormat=mxGraph.prototype.pageFormat,this.graph.currentScale=1,this.graph.currentTranslate.x=0,this.graph.currentTranslate.y=0,this.updateGraphComponents(),this.graph.view.setScale(1)},Editor.prototype.readGraphState=function(t){this.graph.gridEnabled="0"!=t.getAttribute("grid")&&(!this.isChromelessView()||"1"==urlParams.grid),this.graph.gridSize=parseFloat(t.getAttribute("gridSize"))||mxGraph.prototype.gridSize,this.graph.graphHandler.guidesEnabled="0"!=t.getAttribute("guides"),this.graph.setTooltips("0"!=t.getAttribute("tooltips")),this.graph.setConnectable("0"!=t.getAttribute("connect")),this.graph.connectionArrowsEnabled="0"!=t.getAttribute("arrows"),this.graph.foldingEnabled="0"!=t.getAttribute("fold"),this.isChromelessView()&&this.graph.foldingEnabled&&(this.graph.foldingEnabled="1"==urlParams.nav,this.graph.cellRenderer.forceControlClickHandler=this.graph.foldingEnabled);var e=parseFloat(t.getAttribute("pageScale"));if(!isNaN(e)&&e>0?this.graph.pageScale=e:this.graph.pageScale=mxGraph.prototype.pageScale,this.graph.isLightboxView())this.graph.pageVisible=!1;else{var i=t.getAttribute("page");null!=i?this.graph.pageVisible="0"!=i:this.graph.pageVisible=this.graph.defaultPageVisible}this.graph.pageBreaksVisible=this.graph.pageVisible,this.graph.preferPageSize=this.graph.pageBreaksVisible;var n=parseFloat(t.getAttribute("pageWidth")),r=parseFloat(t.getAttribute("pageHeight"));isNaN(n)||isNaN(r)||(this.graph.pageFormat=new mxRectangle(0,0,n,r));var a=t.getAttribute("background");null!=a&&a.length>0?this.graph.background=a:this.graph.background=null},Editor.prototype.setGraphXml=function(t){if(null!=t){var e=new mxCodec(t.ownerDocument);if("mxGraphModel"==t.nodeName){this.graph.model.beginUpdate();try{this.graph.model.clear(),this.graph.view.scale=1,this.readGraphState(t),this.updateGraphComponents(),e.decode(t,this.graph.getModel())}finally{this.graph.model.endUpdate()}this.fireEvent(new mxEventObject("resetGraphView"))}else{if("root"!=t.nodeName)throw{message:mxResources.get("cannotOpenFile"),node:t,toString:function(){return this.message}};this.resetGraph();var i=e.document.createElement("mxGraphModel");i.appendChild(t),e.decode(i,this.graph.getModel()),this.updateGraphComponents(),this.fireEvent(new mxEventObject("resetGraphView"))}}else this.resetGraph(),this.graph.model.clear(),this.fireEvent(new mxEventObject("resetGraphView"))},Editor.prototype.getGraphXml=function(t){t=null!=t?t:!0;var e=null;if(t){var i=new mxCodec(mxUtils.createXmlDocument());e=i.encode(this.graph.getModel())}else e=this.graph.encodeCells(mxUtils.sortCells(this.graph.model.getTopmostCells(this.graph.getSelectionCells())));return(0!=this.graph.view.translate.x||0!=this.graph.view.translate.y)&&(e.setAttribute("dx",Math.round(100*this.graph.view.translate.x)/100),e.setAttribute("dy",Math.round(100*this.graph.view.translate.y)/100)),e.setAttribute("grid",this.graph.isGridEnabled()?"1":"0"),e.setAttribute("gridSize",this.graph.gridSize),e.setAttribute("guides",this.graph.graphHandler.guidesEnabled?"1":"0"),e.setAttribute("tooltips",this.graph.tooltipHandler.isEnabled()?"1":"0"),e.setAttribute("connect",this.graph.connectionHandler.isEnabled()?"1":"0"),e.setAttribute("arrows",this.graph.connectionArrowsEnabled?"1":"0"),e.setAttribute("fold",this.graph.foldingEnabled?"1":"0"),e.setAttribute("page",this.graph.pageVisible?"1":"0"),e.setAttribute("pageScale",this.graph.pageScale),e.setAttribute("pageWidth",this.graph.pageFormat.width),e.setAttribute("pageHeight",this.graph.pageFormat.height),null!=this.graph.background&&e.setAttribute("background",this.graph.background),e},Editor.prototype.updateGraphComponents=function(){var t=this.graph;null!=t.container&&(t.view.validateBackground(),t.container.style.overflow=t.scrollbars?"auto":"hidden",this.fireEvent(new mxEventObject("updateGraphComponents")))},Editor.prototype.setModified=function(t){this.modified=t},Editor.prototype.setFilename=function(t){this.filename=t},Editor.prototype.createUndoManager=function(){var t=this.graph,e=new mxUndoManager;this.undoListener=function(t,i){e.undoableEditHappened(i.getProperty("edit"))};var i=mxUtils.bind(this,function(t,e){this.undoListener.apply(this,arguments)});t.getModel().addListener(mxEvent.UNDO,i),t.getView().addListener(mxEvent.UNDO,i);var n=function(e,i){for(var n=t.getSelectionCellsForChanges(i.getProperty("edit").changes),r=(t.getModel(),[]),a=0;a<n.length;a++)null!=t.view.getState(n[a])&&r.push(n[a]);t.setSelectionCells(r)};return e.addListener(mxEvent.UNDO,n),e.addListener(mxEvent.REDO,n),e},Editor.prototype.destroy=function(){null!=this.graph&&(this.graph.destroy(),this.graph=null)},Dialog.backdropColor="white",Dialog.prototype.zIndex=mxPopupMenu.prototype.zIndex-1,Dialog.prototype.noColorImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkEzRDlBMUUwODYxMTExRTFCMzA4RDdDMjJBMEMxRDM3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkEzRDlBMUUxODYxMTExRTFCMzA4RDdDMjJBMEMxRDM3Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTNEOUExREU4NjExMTFFMUIzMDhEN0MyMkEwQzFEMzciIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTNEOUExREY4NjExMTFFMUIzMDhEN0MyMkEwQzFEMzciLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5xh3fmAAAABlBMVEX////MzMw46qqDAAAAGElEQVR42mJggAJGKGAYIIGBth8KAAIMAEUQAIElnLuQAAAAAElFTkSuQmCC":IMAGE_PATH+"/nocolor.png",Dialog.prototype.closeImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJAQMAAADaX5RTAAAABlBMVEV7mr3///+wksspAAAAAnRSTlP/AOW3MEoAAAAdSURBVAgdY9jXwCDDwNDRwHCwgeExmASygSL7GgB12QiqNHZZIwAAAABJRU5ErkJggg==":IMAGE_PATH+"/close.png",Dialog.prototype.clearImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhDQAKAIABAMDAwP///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUIzOEM1NzI4NjEyMTFFMUEzMkNDMUE3NjZERDE2QjIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUIzOEM1NzM4NjEyMTFFMUEzMkNDMUE3NjZERDE2QjIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QjM4QzU3MDg2MTIxMUUxQTMyQ0MxQTc2NkREMTZCMiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QjM4QzU3MTg2MTIxMUUxQTMyQ0MxQTc2NkREMTZCMiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAEAAAEALAAAAAANAAoAAAIXTGCJebD9jEOTqRlttXdrB32PJ2ncyRQAOw==":IMAGE_PATH+"/clear.gif",Dialog.prototype.lockedImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzdDMDZCODExNzIxMTFFNUI0RTk5NTg4OTcyMUUyODEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzdDMDZCODIxNzIxMTFFNUI0RTk5NTg4OTcyMUUyODEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozN0MwNkI3RjE3MjExMUU1QjRFOTk1ODg5NzIxRTI4MSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozN0MwNkI4MDE3MjExMUU1QjRFOTk1ODg5NzIxRTI4MSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvqMCFYAAAAVUExURZmZmb+/v7KysqysrMzMzLGxsf///4g8N1cAAAAHdFJOU////////wAaSwNGAAAAPElEQVR42lTMQQ4AIQgEwUa0//9kTQirOweYOgDqAMbZUr10AGlAwx4/BJ2QJ4U0L5brYjovvpv32xZgAHZaATFtMbu4AAAAAElFTkSuQmCC":IMAGE_PATH+"/locked.png",Dialog.prototype.unlockedImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzdDMDZCN0QxNzIxMTFFNUI0RTk5NTg4OTcyMUUyODEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzdDMDZCN0UxNzIxMTFFNUI0RTk5NTg4OTcyMUUyODEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozN0MwNkI3QjE3MjExMUU1QjRFOTk1ODg5NzIxRTI4MSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozN0MwNkI3QzE3MjExMUU1QjRFOTk1ODg5NzIxRTI4MSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkKMpVwAAAAYUExURZmZmbKysr+/v6ysrOXl5czMzLGxsf///zHN5lwAAAAIdFJOU/////////8A3oO9WQAAADxJREFUeNpUzFESACAEBNBVsfe/cZJU+8Mzs8CIABCidtfGOndnYsT40HDSiCcbPdoJo10o9aI677cpwACRoAF3dFNlswAAAABJRU5ErkJggg==":IMAGE_PATH+"/unlocked.png",Dialog.prototype.bgOpacity=80,Dialog.prototype.getPosition=function(t,e){return new mxPoint(t,e)},Dialog.prototype.close=function(t){null!=this.onDialogClose&&(this.onDialogClose(t),this.onDialogClose=null),null!=this.dialogImg&&(this.dialogImg.parentNode.removeChild(this.dialogImg),this.dialogImg=null),null!=this.bg&&null!=this.bg.parentNode&&this.bg.parentNode.removeChild(this.bg),mxEvent.removeListener(window,"resize",this.resizeListener),this.container.parentNode.removeChild(this.container)};var PrintDialog=function(t,e){this.create(t,e)};PrintDialog.prototype.create=function(t){function e(t){var e=o.checked||h.checked,i=parseInt(c.value)/100;isNaN(i)&&(i=1,c.value="100%"),i*=.75;var n=r.pageFormat||mxConstants.PAGE_FORMAT_A4_PORTRAIT,a=1/r.pageScale;if(e){var l=o.checked?1:parseInt(d.value);isNaN(l)||(a=mxUtils.getScaleForPageCount(l,r,n))}var s=(r.getGraphBounds(),0),p=0,g=0;if(n=mxRectangle.fromRectangle(n),n.width=Math.ceil(n.width*i),n.height=Math.ceil(n.height*i),a*=i,!e&&r.pageVisible){var u=r.getPageLayout();p-=u.x*n.width,g-=u.y*n.height}else e=!0;var m=PrintDialog.createPrintPreview(r,a,n,s,p,g,e);m.open(),t&&PrintDialog.printPreview(m)}var i,n,r=t.editor.graph,a=document.createElement("table");a.style.width="100%",a.style.height="100%";var l=document.createElement("tbody");i=document.createElement("tr");var o=document.createElement("input");o.setAttribute("type","checkbox"),n=document.createElement("td"),n.setAttribute("colspan","2"),n.style.fontSize="10pt",n.appendChild(o);var s=document.createElement("span");mxUtils.write(s," "+mxResources.get("fitPage")),n.appendChild(s),mxEvent.addListener(s,"click",function(t){o.checked=!o.checked,h.checked=!o.checked,mxEvent.consume(t)}),mxEvent.addListener(o,"change",function(){h.checked=!o.checked}),i.appendChild(n),l.appendChild(i),i=i.cloneNode(!1);var h=document.createElement("input");h.setAttribute("type","checkbox"),n=document.createElement("td"),n.style.fontSize="10pt",n.appendChild(h);var s=document.createElement("span");mxUtils.write(s," "+mxResources.get("posterPrint")+":"),n.appendChild(s),mxEvent.addListener(s,"click",function(t){h.checked=!h.checked,o.checked=!h.checked,mxEvent.consume(t)}),i.appendChild(n);var d=document.createElement("input");d.setAttribute("value","1"),d.setAttribute("type","number"),d.setAttribute("min","1"),d.setAttribute("size","4"),d.setAttribute("disabled","disabled"),d.style.width="50px",n=document.createElement("td"),n.style.fontSize="10pt",n.appendChild(d),mxUtils.write(n," "+mxResources.get("pages")+" (max)"),i.appendChild(n),l.appendChild(i),mxEvent.addListener(h,"change",function(){h.checked?d.removeAttribute("disabled"):d.setAttribute("disabled","disabled"),o.checked=!h.checked}),i=i.cloneNode(!1),n=document.createElement("td"),mxUtils.write(n,mxResources.get("pageScale")+":"),i.appendChild(n),n=document.createElement("td");var c=document.createElement("input");c.setAttribute("value","100 %"),c.setAttribute("size","5"),c.style.width="50px",n.appendChild(c),i.appendChild(n),l.appendChild(i),i=document.createElement("tr"),n=document.createElement("td"),n.colSpan=2,n.style.paddingTop="20px",n.setAttribute("align","right");var p=mxUtils.button(mxResources.get("cancel"),function(){t.hideDialog()});if(p.className="geBtn",t.editor.cancelFirst&&n.appendChild(p),PrintDialog.previewEnabled){var g=mxUtils.button(mxResources.get("preview"),function(){t.hideDialog(),e(!1)});g.className="geBtn",n.appendChild(g)}var u=mxUtils.button(mxResources.get(PrintDialog.previewEnabled?"print":"ok"),function(){t.hideDialog(),e(!0)});u.className="geBtn gePrimaryBtn",n.appendChild(u),t.editor.cancelFirst||n.appendChild(p),i.appendChild(n),l.appendChild(i),a.appendChild(l),this.container=a},PrintDialog.printPreview=function(t){if(null!=t.wnd){var e=function(){t.wnd.focus(),t.wnd.print(),t.wnd.close()};mxClient.IS_GC?window.setTimeout(e,500):e()}},PrintDialog.createPrintPreview=function(t,e,i,n,r,a,l){var o=new mxPrintPreview(t,e,i,n,r,a);o.title=mxResources.get("preview"),o.printBackgroundImage=!0,o.autoOrigin=l;var s=t.background;(null==s||""==s||s==mxConstants.NONE)&&(s="#ffffff"),o.backgroundColor=s;var h=o.writeHead;return o.writeHead=function(t){h.apply(this,arguments),t.writeln('<style type="text/css">'),t.writeln("@media screen {"),t.writeln("  body > div { padding:30px;box-sizing:content-box; }"),t.writeln("}"),t.writeln("</style>")},o},PrintDialog.previewEnabled=!0;var PageSetupDialog=function(t){function e(){null==c||c==mxConstants.NONE?(d.style.backgroundColor="",d.style.backgroundImage="url('"+Dialog.prototype.noColorImage+"')"):(d.style.backgroundColor=c,d.style.backgroundImage="")}function i(){null==u?(g.removeAttribute("title"),g.style.fontSize="",g.innerHTML=mxResources.get("change")+"..."):(g.setAttribute("title",u.src),g.style.fontSize="11px",g.innerHTML=u.src.substring(0,42)+"...")}var n,r,a=t.editor.graph,l=document.createElement("table");l.style.width="100%",l.style.height="100%";var o=document.createElement("tbody");n=document.createElement("tr"),r=document.createElement("td"),r.style.verticalAlign="top",r.style.fontSize="10pt",mxUtils.write(r,mxResources.get("paperSize")+":"),n.appendChild(r),r=document.createElement("td"),r.style.verticalAlign="top",r.style.fontSize="10pt";var s=PageSetupDialog.addPageFormatPanel(r,"pagesetupdialog",a.pageFormat);n.appendChild(r),o.appendChild(n),n=document.createElement("tr"),r=document.createElement("td"),mxUtils.write(r,mxResources.get("background")+":"),n.appendChild(r),r=document.createElement("td"),r.style.whiteSpace="nowrap";var h=document.createElement("input");h.setAttribute("type","text");var d=document.createElement("button");d.style.width="18px",d.style.height="18px",d.style.marginRight="20px",d.style.backgroundPosition="center center",d.style.backgroundRepeat="no-repeat";var c=a.background;e(),mxEvent.addListener(d,"click",function(i){t.pickColor(c||"none",function(t){c=t,e()}),mxEvent.consume(i)}),r.appendChild(d),mxUtils.write(r,mxResources.get("gridSize")+":");var p=document.createElement("input");p.setAttribute("type","number"),p.setAttribute("min","0"),p.style.width="40px",p.style.marginLeft="6px",p.value=a.getGridSize(),r.appendChild(p),mxEvent.addListener(p,"change",function(){var t=parseInt(p.value);p.value=Math.max(1,isNaN(t)?a.getGridSize():t)}),n.appendChild(r),o.appendChild(n),n=document.createElement("tr"),r=document.createElement("td"),mxUtils.write(r,mxResources.get("image")+":"),n.appendChild(r),r=document.createElement("td");var g=document.createElement("a");g.style.textDecoration="underline",g.style.cursor="pointer",g.style.color="#a0a0a0";var u=a.backgroundImage;mxEvent.addListener(g,"click",function(e){t.showBackgroundImageDialog(function(t){u=t,i()}),mxEvent.consume(e)}),i(),r.appendChild(g),n.appendChild(r),o.appendChild(n),n=document.createElement("tr"),r=document.createElement("td"),r.colSpan=2,r.style.paddingTop="16px",r.setAttribute("align","right");var m=mxUtils.button(mxResources.get("cancel"),function(){t.hideDialog()});m.className="geBtn",t.editor.cancelFirst&&r.appendChild(m);var A=mxUtils.button(mxResources.get("apply"),function(){t.hideDialog(),a.gridSize!==p.value&&a.setGridSize(parseInt(p.value));var e=new ChangePageSetup(t,c,u,s.get());e.ignoreColor=a.background==c;var i=null!=a.backgroundImage?a.backgroundImage.src:null,n=null!=u?u.src:null;e.ignoreImage=i===n,a.pageFormat.width==e.previousFormat.width&&a.pageFormat.height==e.previousFormat.height&&e.ignoreColor&&e.ignoreImage||a.model.execute(e)});A.className="geBtn gePrimaryBtn",r.appendChild(A),t.editor.cancelFirst||r.appendChild(m),n.appendChild(r),o.appendChild(n),l.appendChild(o),this.container=l};PageSetupDialog.addPageFormatPanel=function(t,e,i,n){function r(t,e,n){if(n||g!=document.activeElement&&u!=document.activeElement){for(var r=!1,a=0;a<A.length;a++){var d=A[a];f?"custom"==d.key&&(s.value=d.key,f=!1):null!=d.format&&("a4"==d.key?826==i.width?(i=mxRectangle.fromRectangle(i),i.width=827):826==i.height&&(i=mxRectangle.fromRectangle(i),i.height=827):"a5"==d.key&&(584==i.width?(i=mxRectangle.fromRectangle(i),i.width=583):584==i.height&&(i=mxRectangle.fromRectangle(i),i.height=583)),i.width==d.format.width&&i.height==d.format.height?(s.value=d.key,l.setAttribute("checked","checked"),l.defaultChecked=!0,l.checked=!0,o.removeAttribute("checked"),o.defaultChecked=!1,o.checked=!1,r=!0):i.width==d.format.height&&i.height==d.format.width&&(s.value=d.key,l.removeAttribute("checked"),l.defaultChecked=!1,l.checked=!1,o.setAttribute("checked","checked"),o.defaultChecked=!0,o.checked=!0,r=!0))}r?(h.style.display="",p.style.display="none"):(g.value=i.width/100,u.value=i.height/100,l.setAttribute("checked","checked"),s.value="custom",h.style.display="none",p.style.display="")}}var a="format-"+e,l=document.createElement("input");l.setAttribute("name",a),l.setAttribute("type","radio"),l.setAttribute("value","portrait");var o=document.createElement("input");o.setAttribute("name",a),o.setAttribute("type","radio"),o.setAttribute("value","landscape");var s=document.createElement("select");s.style.marginBottom="8px",s.style.width="202px";var h=document.createElement("div");h.style.marginLeft="4px",h.style.width="210px",h.style.height="24px",l.style.marginRight="6px",h.appendChild(l);var d=document.createElement("span");d.style.maxWidth="100px",mxUtils.write(d,mxResources.get("portrait")),h.appendChild(d),o.style.marginLeft="10px",o.style.marginRight="6px",h.appendChild(o);var c=document.createElement("span");c.style.width="100px",mxUtils.write(c,mxResources.get("landscape")),h.appendChild(c);var p=document.createElement("div");p.style.marginLeft="4px",p.style.width="210px",p.style.height="24px";var g=document.createElement("input");g.setAttribute("size","7"),g.style.textAlign="right",p.appendChild(g),mxUtils.write(p," in x ");var u=document.createElement("input");u.setAttribute("size","7"),u.style.textAlign="right",p.appendChild(u),mxUtils.write(p," in"),h.style.display="none",p.style.display="none";for(var m=new Object,A=PageSetupDialog.getFormats(),v=0;v<A.length;v++){var x=A[v];m[x.key]=x;var y=document.createElement("option");y.setAttribute("value",x.key),mxUtils.write(y,x.title),s.appendChild(y)}var f=!1;r(),t.appendChild(s),mxUtils.br(t),t.appendChild(h),t.appendChild(p);var E=i,C=function(t,e){var r=m[s.value];null!=r.format?(g.value=r.format.width/100,u.value=r.format.height/100,p.style.display="none",h.style.display=""):(h.style.display="none",p.style.display="");var a=parseFloat(g.value);(isNaN(a)||0>=a)&&(g.value=i.width/100);var l=parseFloat(u.value);(isNaN(l)||0>=l)&&(u.value=i.height/100);var d=new mxRectangle(0,0,Math.floor(100*parseFloat(g.value)),Math.floor(100*parseFloat(u.value)));"custom"!=s.value&&o.checked&&(d=new mxRectangle(0,0,d.height,d.width)),e&&f||d.width==E.width&&d.height==E.height||(E=d,null!=n&&n(E))};return mxEvent.addListener(d,"click",function(t){l.checked=!0,C(t),mxEvent.consume(t)}),mxEvent.addListener(c,"click",function(t){o.checked=!0,C(t),mxEvent.consume(t)}),mxEvent.addListener(g,"blur",C),mxEvent.addListener(g,"click",C),mxEvent.addListener(u,"blur",C),mxEvent.addListener(u,"click",C),mxEvent.addListener(o,"change",C),mxEvent.addListener(l,"change",C),mxEvent.addListener(s,"change",function(t){f="custom"==s.value,C(t,!0)}),C(),{set:function(t){i=t,r(null,null,!0)},get:function(){return E},widthInput:g,heightInput:u}},function(){mxGraphView.prototype.validateBackgroundPage=function(){var t=this.graph,e=null==t.background||t.background==mxConstants.NONE?t.defaultPageBackgroundColor:t.background,i=null!=e&&this.gridColor!=e.toLowerCase()?this.gridColor:"#ffffff";return image=unescape(encodeURIComponent(this.createSvgGrid(i))),image=window.btoa?btoa(image):Base64.encode(image,!0),void(image="url(data:image/svg+xml;base64,"+image+")")},mxGraphView.prototype.validateBackgroundStyles=function(){var t=this.graph,e=null==t.background||t.background==mxConstants.NONE?t.defaultPageBackgroundColor:t.background,i=null!=e&&this.gridColor!=e.toLowerCase()?this.gridColor:"#ffffff",n="none",r="";if(t.isGridEnabled()){var a=10;mxClient.IS_SVG?(n=unescape(encodeURIComponent(this.createSvgGrid(i))),n=window.btoa?btoa(n):Base64.encode(n,!0),n="url(data:image/svg+xml;base64,"+n+")",a=t.gridSize*this.scale*this.gridSteps):n="url("+this.gridImage+")";var l=0,o=0;if(null!=t.view.backgroundPageShape){var s=this.getBackgroundPageBounds();l=1+s.x,o=1+s.y}r=-Math.round(a-mxUtils.mod(this.translate.x*this.scale-l,a))+"px "+-Math.round(a-mxUtils.mod(this.translate.y*this.scale-o,a))+"px"}var h=t.view.canvas;null!=h.ownerSVGElement&&(h=h.ownerSVGElement),null!=t.view.backgroundPageShape?(t.view.backgroundPageShape.node.style.backgroundPosition=r,t.view.backgroundPageShape.node.style.backgroundImage=n,t.view.backgroundPageShape.node.style.backgroundColor=e,t.container.className="geDiagramContainer geDiagramBackdrop",h.style.backgroundImage="none",h.style.backgroundColor=""):(t.container.className="geDiagramContainer",h.style.backgroundPosition=r,h.style.backgroundColor=e,h.style.backgroundImage=n)},mxGraphView.prototype.createSvgGrid=function(t){for(var e=this.graph.gridSize*this.scale;e<this.minGridSize;)e*=2;for(var i=this.gridSteps*e,n=[],r=1;r<this.gridSteps;r++){var a=r*e;n.push("M 0 "+a+" L "+i+" "+a+" M "+a+" 0 L "+a+" "+i)}var l=i,o='<svg width="'+l+'" height="'+l+'" xmlns="'+mxConstants.NS_SVG+'"><defs><pattern id="grid" width="'+i+'" height="'+i+'" patternUnits="userSpaceOnUse"><path d="'+n.join(" ")+'" fill="none" stroke="'+t+'" opacity="0.2" stroke-width="1"/><path d="M '+i+" 0 L 0 0 0 "+i+'" fill="none" stroke="'+t+'" stroke-width="1"/></pattern></defs><rect width="100%" height="100%" fill="url(#grid)"/></svg>';return o};var t=mxGraph.prototype.panGraph;mxGraph.prototype.panGraph=function(e,i){if(t.apply(this,arguments),null!=this.shiftPreview1){var n=this.view.canvas;null!=n.ownerSVGElement&&(n=n.ownerSVGElement);var r=this.gridSize*this.view.scale*this.view.gridSteps,a=-Math.round(r-mxUtils.mod(this.view.translate.x*this.view.scale+e,r))+"px "+-Math.round(r-mxUtils.mod(this.view.translate.y*this.view.scale+i,r))+"px";n.style.backgroundPosition=a}},mxGraph.prototype.updatePageBreaks=function(t,e,i){var n=this.view.scale,r=this.view.translate,a=this.pageFormat,l=n*this.pageScale,o=this.view.getBackgroundPageBounds();e=o.width,i=o.height;var s=new mxRectangle(n*r.x,n*r.y,a.width*l,a.height*l);t=t&&Math.min(s.width,s.height)>this.minPageBreakDist;var h=t?Math.ceil(i/s.height)-1:0,d=t?Math.ceil(e/s.width)-1:0,c=o.x+e,p=o.y+i;null==this.horizontalPageBreaks&&h>0&&(this.horizontalPageBreaks=[]),null==this.verticalPageBreaks&&d>0&&(this.verticalPageBreaks=[]);var g=mxUtils.bind(this,function(t){if(null!=t){for(var e=t==this.horizontalPageBreaks?h:d,i=0;e>=i;i++){var n=t==this.horizontalPageBreaks?[new mxPoint(Math.round(o.x),Math.round(o.y+(i+1)*s.height)),new mxPoint(Math.round(c),Math.round(o.y+(i+1)*s.height))]:[new mxPoint(Math.round(o.x+(i+1)*s.width),Math.round(o.y)),new mxPoint(Math.round(o.x+(i+1)*s.width),Math.round(p))];if(null!=t[i])t[i].points=n,t[i].redraw();else{var r=new mxPolyline(n,this.pageBreakColor);r.dialect=this.dialect,r.isDashed=this.pageBreakDashed,r.pointerEvents=!1,r.init(this.view.backgroundPane),r.redraw(),t[i]=r}}for(var i=e;i<t.length;i++)t[i].destroy();t.splice(e,t.length-e)}});g(this.horizontalPageBreaks),g(this.verticalPageBreaks)};var e=mxGraphHandler.prototype.shouldRemoveCellsFromParent;mxGraphHandler.prototype.shouldRemoveCellsFromParent=function(t,i,n){for(var r=0;r<i.length;r++)if(this.graph.getModel().isVertex(i[r])){var a=this.graph.getCellGeometry(i[r]);if(null!=a&&a.relative)return!1}return e.apply(this,arguments)};var i=mxConnectionHandler.prototype.createMarker;mxConnectionHandler.prototype.createMarker=function(){var t=i.apply(this,arguments);return t.intersects=mxUtils.bind(this,function(e,i){return this.isConnecting()?!0:mxCellMarker.prototype.intersects.apply(t,arguments)}),t},mxGraphView.prototype.createBackgroundPageShape=function(t){return new mxRectangleShape(t,"#ffffff","#ffffff")},mxGraphView.prototype.getBackgroundPageBounds=function(){var t=this.getGraphBounds(),e=t.width>0?t.x/this.scale-this.translate.x:0,i=t.height>0?t.y/this.scale-this.translate.y:0,n=t.width/this.scale,r=t.height/this.scale,a=this.graph.pageFormat,l=this.graph.pageScale,o=a.width*l,s=a.height*l,h=Math.floor(Math.min(0,e)/o),d=Math.floor(Math.min(0,i)/s),c=Math.ceil(Math.max(1,e+n)/o),p=Math.ceil(Math.max(1,i+r)/s),g=c-h,u=p-d,m=new mxRectangle(this.scale*(this.translate.x+h*o),this.scale*(this.translate.y+d*s),this.scale*g*o,this.scale*u*s);return m};var n=mxGraph.prototype.panGraph;mxGraph.prototype.panGraph=function(t,e){n.apply(this,arguments),this.dialect==mxConstants.DIALECT_SVG||null==this.view.backgroundPageShape||this.useScrollbarsForPanning&&mxUtils.hasScrollbars(this.container)||(this.view.backgroundPageShape.node.style.marginLeft=t+"px",this.view.backgroundPageShape.node.style.marginTop=e+"px")};var r=mxPopupMenu.prototype.addItem;mxPopupMenu.prototype.addItem=function(t,e,i,n,a,l){var o=r.apply(this,arguments);return null==l||l||mxEvent.addListener(o,"mousedown",function(t){mxEvent.consume(t)}),o};var a=mxGraphHandler.prototype.getInitialCellForEvent;mxGraphHandler.prototype.getInitialCellForEvent=function(t){var e=this.graph.getModel(),i=e.getParent(this.graph.getSelectionCell()),n=a.apply(this,arguments),r=e.getParent(n);if(null==i||i!=n&&i!=r)for(;!this.graph.isCellSelected(n)&&!this.graph.isCellSelected(r)&&e.isVertex(r)&&!this.graph.isContainer(r);)n=r,r=this.graph.getModel().getParent(n);return n};var l=mxGraphHandler.prototype.isDelayedSelection;mxGraphHandler.prototype.isDelayedSelection=function(t,e){var i=l.apply(this,arguments);if(!i)for(var n=this.graph.getModel(),r=n.getParent(t);null!=r;){if(this.graph.isCellSelected(r)&&n.isVertex(r)){i=!0;break}r=n.getParent(r)}return i},mxGraphHandler.prototype.selectDelayed=function(t){if(!this.graph.popupMenuHandler.isPopupTrigger(t)){var e=t.getCell();null==e&&(e=this.cell);var i=this.graph.view.getState(e);if(null!=i&&t.isSource(i.control))this.graph.selectCellForEvent(e,t.getEvent());else{for(var n=this.graph.getModel(),r=n.getParent(e);!this.graph.isCellSelected(r)&&n.isVertex(r);)e=r,
r=n.getParent(e);this.graph.selectCellForEvent(e,t.getEvent())}}},mxPopupMenuHandler.prototype.getCellForPopupEvent=function(t){for(var e=t.getCell(),i=this.graph.getModel(),n=i.getParent(e);i.isVertex(n)&&!this.graph.isContainer(n);)this.graph.isCellSelected(n)&&(e=n),n=i.getParent(n);return e}}();
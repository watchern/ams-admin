function Actions(e){this.editorUi=e,this.actions=new Object,this.init()}function Action(e,t,n,l,o){mxEventSource.call(this),this.label=e,this.funct=this.createFunction(t),this.enabled=null!=n?n:!0,this.iconCls=l,this.shortcut=o,this.visible=!0}Actions.prototype.init=function(){function e(){i.escape();for(var e=!0,t=i.getDeletableCells(i.getSelectionCells()),n=!1,l=0;l<t.length;l++)if(t[l].vertex&&i.nodeData[t[l].id]&&2==i.nodeData[t[l].id].nodeInfo.nodeExcuteStatus){n=!0;break}if(n)return void alertMsg("错误","剪切的节点中有正在执行的节点，剪切失败！","error");if(null!=t&&t.length>0){for(var o=[],a=[],d=[],l=0;l<t.length;l++)a.push(t[l].id);for(var l=0;l<t.length;l++){if(t[l].edge){if(t[l].source&&-1!=$.inArray(t[l].source.id,a)&&t[l].target&&-1!=$.inArray(t[l].target.id,a))continue;e=!1;break}d.push(t[l].id),o.push({id:t[l].id,nodeData:i.nodeData[t[l].id]});for(var s=[],r=i.nodeData[t[l].id].childrenIds,c=0;c<r.length;c++)-1==$.inArray(r[c],a)&&s.push(r[c]);for(var u=0;u<s.length;u++)changeNodeInfo(s[u],!0)}if(!e)return void alertMsg("错误","连接线必须连同节点一起剪切","error");for(var l=0;l<t.length;l++)if(t[l].edge){var f=t[l].source,g=t[l].target;if(i.nodeData[g.id]&&-1!=$.inArray(f.id,i.nodeData[g.id].parentIds)){var C=$.inArray(f.id,i.nodeData[g.id].parentIds);i.nodeData[g.id].parentIds.splice(C,1),-1==$.inArray(g.id,a)&&changeNodeInfo(g.id,!0)}if(i.nodeData[f.id]&&-1!=$.inArray(g.id,i.nodeData[f.id].childrenIds)){var C=$.inArray(g.id,i.nodeData[f.id].childrenIds);i.nodeData[f.id].childrenIds.splice(C,1)}}for(var c=0;c<o.length;c++)delete i.nodeData[o[c].id];i.oldOptArr.push({optType:"cut",optArr:o}),mxClipboard.cut(i),deleteResourceZtreeNode(d),refrashHistoryZtree("剪切节点操作"),autoSaveGraph()}}function t(){i.escape();for(var e=!0,t=i.getDeletableCells(i.getSelectionCells()),n=!1,l=0;l<t.length;l++)if(t[l].vertex&&i.nodeData[t[l].id]&&2==i.nodeData[t[l].id].nodeInfo.nodeExcuteStatus){n=!0;break}if(n)return void alertMsg("错误","复制的节点中有正在执行的节点，复制失败！","error");if(null!=t&&t.length>0){for(var o=[],l=0;l<t.length;l++)o.push(t[l].id);for(var l=0;l<t.length;l++)if(t[l].edge){if(t[l].source&&-1!=$.inArray(t[l].source.id,o)&&t[l].target&&-1!=$.inArray(t[l].target.id,o))continue;e=!1;break}if(!e)return void alertMsg("错误","连接线必须连同节点一起复制","error");mxClipboard.copy(i)}}function n(e){var t=i.getImportableCells(mxClipboard.getCells());if(null!=t&&t.length>0){for(var n=[],l=0;l<t.length;l++)if(!t[l].edge){var o={};if(i.nodeData[t[l].id])o=i.nodeData[t[l].id];else{for(var a=i.oldOptArr.length;a>0;a--){var d=i.oldOptArr[a-1].optType,s=i.oldOptArr[a-1].optArr;if("cut"==d){for(var r=0;r<s.length;r++)t[l].id==s[r].id&&(o=s[r].nodeData);break}}if(0==Object.keys(o).length)for(var c=0;c<i.newOptArr.length;c++){var d=i.newOptArr[c].optType,s=i.newOptArr[c].optArr;if("cut"==d){for(var u=0;u<s.length;u++)t[l].id==s[u].id&&(o=s[u].nodeData);break}}}if(0==Object.keys(o).length)return void alertMsg("错误","粘贴出错","error");if(i.nodeData[e[l].id]={},"datasource"==o.nodeInfo.optType){for(var f=0;f<Object.keys(o).length;f++){var g=Object.keys(o)[f];i.nodeData[e[l].id][g]=o[g]}changeNodeIcon(3,!0,e[l].id),i.nodeData[e[l].id].nodeInfo.nodeId=e[l].id,i.nodeData[e[l].id].isCopy=!0}else{var C={id:e[l].id,name:o.nodeInfo.nodeName,type:o.nodeInfo.optType,english:o.nodeInfo.english||""};initNodeData(C,!0)}n.push({id:e[l].id,nodeData:o}),refrashResourceZtree(e[l].id,e[l].value,e[l].nodeType),refrashHistoryZtree("粘贴节点操作")}i.oldOptArr.push({optType:"paste",optArr:n})}for(var l=0;l<e.length;l++)if(e[l].edge){var h=e[l].edge.source,E=e[l].edge.target;i.nodeData[h].childrenIds.push(E.id),i.nodeData[E].parentIds.push(h.id)}}var l=this.editorUi,o=l.editor,i=o.graph,a=function(){return Action.prototype.isEnabled.apply(this,arguments)&&i.isEnabled()};this.addAction("undo",function(){l.undo()},null,"sprite-undo",Editor.ctrlKey+"+Z"),this.addAction("redo",function(){l.redo()},null,"sprite-redo",mxClient.IS_WIN?Editor.ctrlKey+"+Y":Editor.ctrlKey+"+Shift+Z"),this.addAction("cut",function(){confirmMsg("提示","剪切操作会影响所选择节点的后置未剪切节点的节点信息，确定剪切？","info",function(){e()},function(){})},null,"sprite-cut",Editor.ctrlKey+"+X"),this.addAction("copy",function(){t()},null,"sprite-copy",Editor.ctrlKey+"+C"),this.addAction("paste",function(){var e=mxClipboard.paste(i);n(e),e.length>0&&autoSaveGraph()},!1,"sprite-paste",Editor.ctrlKey+"+V"),this.addAction("pasteHere",function(e){if(i.isEnabled()&&!i.isCellLocked(i.getDefaultParent())){i.getModel().beginUpdate();try{var t=mxClipboard.paste(i);if(n(t),null!=t){for(var l=!0,o=0;o<t.length&&l;o++)l=l&&i.model.isEdge(t[o]);var a=i.view.translate,d=i.view.scale,s=a.x,r=a.y,c=null;if(1==t.length&&l){var u=i.getCellGeometry(t[0]);null!=u&&(c=u.getTerminalPoint(!0))}if(c=null!=c?c:i.getBoundingBoxFromGeometry(t,l),null!=c){var f=Math.round(i.snap(i.popupMenuHandler.triggerX/d-s)),g=Math.round(i.snap(i.popupMenuHandler.triggerY/d-r));i.cellsMoved(t,f-c.x,g-c.y)}autoSaveGraph()}}finally{i.getModel().endUpdate()}}}),this.addAction("delete",function(e){confirmMsg("提示","删除操作会影响所选择节点的后置未删除节点的节点信息，确定删除？","info",function(){var t=deleteCells(null!=e&&mxEvent.isShiftDown(e));deleteResourceZtreeNode(t),refrashHistoryZtree("删除节点操作"),autoSaveGraph()},function(){})},null,null,"Delete"),this.addAction("deleteAll",function(){confirmMsg("提示","删除操作会影响所选择节点的后置未删除节点的节点信息，确定删除？","info",function(){var e=deleteCells(!0);deleteResourceZtreeNode(e),refrashHistoryZtree("删除节点操作"),autoSaveGraph()},function(){})},null,null,Editor.ctrlKey+"+Delete"),this.put("turn",new Action(mxResources.get("turn")+" / "+mxResources.get("reverse"),function(){i.turnShapes(i.getSelectionCells())},null,null,Editor.ctrlKey+"+R")),this.addAction("selectVertices",function(){i.selectVertices()},null,null,Editor.ctrlKey+"+Shift+I"),this.addAction("selectEdges",function(){i.selectEdges()},null,null,Editor.ctrlKey+"+Shift+E"),this.addAction("selectAll",function(){i.selectAll(null,!0)},null,null,Editor.ctrlKey+"+A"),this.addAction("selectNone",function(){i.clearSelection()},null,null,Editor.ctrlKey+"+Shift+A"),this.addAction("lockUnlock",function(){if(!i.isSelectionEmpty()){i.getModel().beginUpdate();try{var e=i.isCellMovable(i.getSelectionCell())?1:0;i.toggleCellStyles(mxConstants.STYLE_MOVABLE,e),i.toggleCellStyles(mxConstants.STYLE_RESIZABLE,e),i.toggleCellStyles(mxConstants.STYLE_ROTATABLE,e),i.toggleCellStyles(mxConstants.STYLE_DELETABLE,e),i.toggleCellStyles(mxConstants.STYLE_EDITABLE,e),i.toggleCellStyles("connectable",e)}finally{i.getModel().endUpdate()}}},null,null,Editor.ctrlKey+"+L"),this.addAction("toFront",function(){i.orderCells(!1)},null,null,Editor.ctrlKey+"+Shift+F"),this.addAction("toBack",function(){i.orderCells(!0)},null,null,Editor.ctrlKey+"+Shift+B"),this.addAction("group",function(){1==i.getSelectionCount()?i.setCellStyles("container","1"):i.setSelectionCell(i.groupCells(null,0))},null,null,Editor.ctrlKey+"+G"),this.addAction("ungroup",function(){1==i.getSelectionCount()&&0==i.getModel().getChildCount(i.getSelectionCell())?i.setCellStyles("container","0"):i.setSelectionCells(i.ungroupCells())},null,null,Editor.ctrlKey+"+Shift+U"),this.addAction("removeFromGroup",function(){i.removeCellsFromParent()}),this.addAction("resetView",function(){i.zoomTo(1),l.resetScrollbars()},null,null,Editor.ctrlKey+"+H"),this.addAction("zoomIn",function(e){i.zoomIn()},null,null,"Alt+Mousewheel"),this.addAction("zoomOut",function(e){i.zoomOut()},null,null,"Alt+Mousewheel"),this.addAction("fitWindow",function(){i.fit()},null,null,Editor.ctrlKey+"+Shift+H");var d=null;d=this.addAction("grid",function(){i.setGridEnabled(!i.isGridEnabled()),l.fireEvent(new mxEventObject("gridEnabledChanged"))},null,null,Editor.ctrlKey+"+Shift+G"),d.setToggleAction(!0),d.setSelectedCallback(function(){return i.isGridEnabled()}),d.setEnabled(!1),d=this.addAction("guides",function(){i.graphHandler.guidesEnabled=!i.graphHandler.guidesEnabled,l.fireEvent(new mxEventObject("guidesEnabledChanged"))}),d.setToggleAction(!0),d.setSelectedCallback(function(){return i.graphHandler.guidesEnabled}),d.setEnabled(!1),d=this.addAction("tooltips",function(){i.tooltipHandler.setEnabled(!i.tooltipHandler.isEnabled())}),d.setToggleAction(!0),d.setSelectedCallback(function(){return i.tooltipHandler.isEnabled()}),d=this.addAction("collapseExpand",function(){var e=new ChangePageSetup(l);e.ignoreColor=!0,e.ignoreImage=!0,e.foldingEnabled=!i.foldingEnabled,i.model.execute(e)}),d.setToggleAction(!0),d.setSelectedCallback(function(){return i.foldingEnabled}),d.isEnabled=a,d=this.addAction("scrollbars",function(){l.setScrollbars(!l.hasScrollbars())}),d.setToggleAction(!0),d.setSelectedCallback(function(){return i.scrollbars}),d=this.addAction("pageView",mxUtils.bind(this,function(){l.setPageVisible(!i.pageVisible)})),d.setToggleAction(!0),d.setSelectedCallback(function(){return i.pageVisible}),d=this.addAction("connectionArrows",function(){i.connectionArrowsEnabled=!i.connectionArrowsEnabled,l.fireEvent(new mxEventObject("connectionArrowsChanged"))},null,null,"Alt+Shift+A"),d.setToggleAction(!0),d.setSelectedCallback(function(){return i.connectionArrowsEnabled}),d=this.addAction("connectionPoints",function(){i.setConnectable(!i.connectionHandler.isEnabled()),l.fireEvent(new mxEventObject("connectionPointsChanged"))},null,null,"Alt+Shift+P"),d.setToggleAction(!0),d.setSelectedCallback(function(){return i.connectionHandler.isEnabled()}),d=this.addAction("copyConnect",function(){i.connectionHandler.setCreateTarget(!i.connectionHandler.isCreateTarget()),l.fireEvent(new mxEventObject("copyConnectChanged"))}),d.setToggleAction(!0),d.setSelectedCallback(function(){return i.connectionHandler.isCreateTarget()}),d.isEnabled=a,d=this.addAction("autosave",function(){l.editor.setAutosave(!l.editor.autosave)}),d.setToggleAction(!0),d.setSelectedCallback(function(){return l.editor.autosave}),d.isEnabled=a,d.visible=!1;var s=mxUtils.bind(this,function(e,t,n,l){return this.addAction(e,function(){if(null!=n&&i.cellEditor.isContentEditing())n();else{i.stopEditing(!1),i.getModel().beginUpdate();try{i.toggleCellStyleFlags(mxConstants.STYLE_FONTSTYLE,t),(t&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD?i.updateLabelElements(i.getSelectionCells(),function(e){e.style.fontWeight=null,"B"==e.nodeName&&i.replaceElement(e)}):(t&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC?i.updateLabelElements(i.getSelectionCells(),function(e){e.style.fontStyle=null,"I"==e.nodeName&&i.replaceElement(e)}):(t&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&i.updateLabelElements(i.getSelectionCells(),function(e){e.style.textDecoration=null,"U"==e.nodeName&&i.replaceElement(e)})}finally{i.getModel().endUpdate()}}},null,null,l)});s("bold",mxConstants.FONT_BOLD,function(){document.execCommand("bold",!1,null)},Editor.ctrlKey+"+B"),s("italic",mxConstants.FONT_ITALIC,function(){document.execCommand("italic",!1,null)},Editor.ctrlKey+"+I"),s("underline",mxConstants.FONT_UNDERLINE,function(){document.execCommand("underline",!1,null)},Editor.ctrlKey+"+U"),this.addAction("fontColor...",function(){l.menus.pickColor(mxConstants.STYLE_FONTCOLOR,"forecolor","000000")}),this.addAction("strokeColor...",function(){l.menus.pickColor(mxConstants.STYLE_STROKECOLOR)}),this.addAction("fillColor",function(){l.menus.pickColor(mxConstants.STYLE_FILLCOLOR)}),this.addAction("gradientColor...",function(){l.menus.pickColor(mxConstants.STYLE_GRADIENTCOLOR)}),this.addAction("backgroundColor...",function(){l.menus.pickColor(mxConstants.STYLE_LABEL_BACKGROUNDCOLOR,"backcolor")}),this.addAction("borderColor...",function(){l.menus.pickColor(mxConstants.STYLE_LABEL_BORDERCOLOR)}),this.addAction("vertical",function(){l.menus.toggleStyle(mxConstants.STYLE_HORIZONTAL,!0)}),this.addAction("shadow",function(){l.menus.toggleStyle(mxConstants.STYLE_SHADOW)}),this.addAction("solid",function(){i.getModel().beginUpdate();try{i.setCellStyles(mxConstants.STYLE_DASHED,null),i.setCellStyles(mxConstants.STYLE_DASH_PATTERN,null),l.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],"values",[null,null],"cells",i.getSelectionCells()))}finally{i.getModel().endUpdate()}}),this.addAction("dashed",function(){i.getModel().beginUpdate();try{i.setCellStyles(mxConstants.STYLE_DASHED,"1"),i.setCellStyles(mxConstants.STYLE_DASH_PATTERN,null),l.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],"values",["1",null],"cells",i.getSelectionCells()))}finally{i.getModel().endUpdate()}}),this.addAction("dotted",function(){i.getModel().beginUpdate();try{i.setCellStyles(mxConstants.STYLE_DASHED,"1"),i.setCellStyles(mxConstants.STYLE_DASH_PATTERN,"1 4"),l.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],"values",["1","1 4"],"cells",i.getSelectionCells()))}finally{i.getModel().endUpdate()}}),this.addAction("sharp",function(){i.getModel().beginUpdate();try{i.setCellStyles(mxConstants.STYLE_ROUNDED,"0"),i.setCellStyles(mxConstants.STYLE_CURVED,"0"),l.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_ROUNDED,mxConstants.STYLE_CURVED],"values",["0","0"],"cells",i.getSelectionCells()))}finally{i.getModel().endUpdate()}}),this.addAction("rounded",function(){i.getModel().beginUpdate();try{i.setCellStyles(mxConstants.STYLE_ROUNDED,"1"),i.setCellStyles(mxConstants.STYLE_CURVED,"0"),l.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_ROUNDED,mxConstants.STYLE_CURVED],"values",["1","0"],"cells",i.getSelectionCells()))}finally{i.getModel().endUpdate()}}),this.addAction("toggleRounded",function(){if(!i.isSelectionEmpty()&&i.isEnabled()){i.getModel().beginUpdate();try{var e=i.getSelectionCells(),t=i.view.getState(e[0]),n=null!=t?t.style:i.getCellStyle(e[0]),o="1"==mxUtils.getValue(n,mxConstants.STYLE_ROUNDED,"0")?"0":"1";i.setCellStyles(mxConstants.STYLE_ROUNDED,o),i.setCellStyles(mxConstants.STYLE_CURVED,null),l.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_ROUNDED,mxConstants.STYLE_CURVED],"values",[o,"0"],"cells",i.getSelectionCells()))}finally{i.getModel().endUpdate()}}}),this.addAction("curved",function(){i.getModel().beginUpdate();try{i.setCellStyles(mxConstants.STYLE_ROUNDED,"0"),i.setCellStyles(mxConstants.STYLE_CURVED,"1"),l.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_ROUNDED,mxConstants.STYLE_CURVED],"values",["0","1"],"cells",i.getSelectionCells()))}finally{i.getModel().endUpdate()}}),this.addAction("collapsible",function(){var e=i.view.getState(i.getSelectionCell()),t="1";null!=e&&null!=i.getFoldingImage(e)&&(t="0"),i.setCellStyles("collapsible",t),l.fireEvent(new mxEventObject("styleChanged","keys",["collapsible"],"values",[t],"cells",i.getSelectionCells()))}),this.addAction("editStyle...",mxUtils.bind(this,function(){var e=i.getSelectionCells();if(null!=e&&e.length>0){var t=i.getModel(),n=new TextareaDialog(this.editorUi,mxResources.get("editStyle")+":",t.getStyle(e[0])||"",function(t){null!=t&&i.setCellStyle(mxUtils.trim(t),e)},null,null,400,220);this.editorUi.showDialog(n.container,420,300,!0,!0),n.init()}}),null,null,Editor.ctrlKey+"+E"),this.addAction("addWaypoint",function(){var e=i.getSelectionCell();if(null!=e&&i.getModel().isEdge(e)){var t=o.graph.selectionCellsHandler.getHandler(e);if(t instanceof mxEdgeHandler){for(var n=i.view.translate,l=i.view.scale,a=n.x,d=n.y,s=i.getModel().getParent(e),r=i.getCellGeometry(s);i.getModel().isVertex(s)&&null!=r;)a+=r.x,d+=r.y,s=i.getModel().getParent(s),r=i.getCellGeometry(s);var c=Math.round(i.snap(i.popupMenuHandler.triggerX/l-a)),u=Math.round(i.snap(i.popupMenuHandler.triggerY/l-d));t.addPointAt(t.state,c,u)}}}),this.addAction("removeWaypoint",function(){var e=l.actions.get("removeWaypoint");null!=e.handler&&e.handler.removePoint(e.handler.state,e.index)}),this.addAction("previewNodeData",function(){previewNodeData()}),this.addAction("reName",function(){reName()}),this.addAction("modifyParam",function(){modifyParam()}),this.addAction("reSetProperty",function(){reSetProperty()}),this.addAction("reSetOptProperty",function(){reSetOptProperty()}),this.addAction("executeNode",function(){executeNode()}),this.addAction("executeToNode",function(){executeToNode()}),this.addAction("cancelExecute",function(){cancelExecute()}),this.addAction("sortSet",function(){var e=i.curCell.nodeType,t=i.curCell.value,n="数据排序";data_filter(e,t,n)}),this.addAction("sampleSet",function(){var e=i.curCell.nodeType,t=i.curCell.value,n="数据抽样";data_filter(e,t,n)}),this.addAction("groupCountSet",function(){var e=i.curCell.nodeType,t=i.curCell.value,n="分组汇总";data_filter(e,t,n)}),this.addAction("comparisonSet",function(){var e=i.curCell.nodeType,t=i.curCell.value,n="数据频次分析";data_filter(e,t,n)}),this.addAction("changeSet",function(){var e=i.curCell.nodeType,t=i.curCell.value,n="数据转码";data_filter(e,t,n)}),this.addAction("filterSet",function(){var e=i.curCell.nodeType,t=i.curCell.value,n="数据筛选";data_filter(e,t,n)}),this.addAction("delRepeatSet",function(){var e=i.curCell.nodeType,t=i.curCell.value,n="数据去重";data_filter(e,t,n)}),this.addAction("unionSet",function(){var e=i.curCell.nodeType,t=i.curCell.value,n="数据融合";data_filter(e,t,n)}),this.addAction("relationSet",function(){var e=i.curCell.nodeType,t=i.curCell.value,n="数据关联";data_filter(e,t,n)}),this.addAction("layeringSet",function(){var e=i.curCell.nodeType,t=i.curCell.value,n="数据分层";data_filter(e,t,n)}),this.addAction("barChartSet",function(){var e=i.curCell.nodeType,t=i.curCell.value,n="自定义图形";data_filter(e,t,n)}),this.addAction("markCenterOutput",function(e){var t=i.nodeData[i.curCell.id].nodeInfo.resultTableStatus,n=i.nodeData[i.curCell.id].nodeInfo.midTableStatus,l=i.nodeData[i.curCell.id].nodeInfo.nodeExcuteStatus,o=i.nodeData[i.curCell.id].parentIds;return i.nodeData[o[0]]&&"comparison"===i.nodeData[o[0]].nodeInfo.optType?void alertMsg("提示","频次分析节点的结果表无法被标记","warning"):void(2===l?alertMsg("提示","无法标记正在执行的节点","warning"):2===n?(i.nodeData[i.curCell.id].nodeInfo.midTableStatus=1,setNodeOutputTypeIcon(1,0),autoSaveGraph()):2===t?alertMsg("提示","该结果表已被标记为模型最终结果表","info"):(i.nodeData[i.curCell.id].nodeInfo.midTableStatus=2,setNodeOutputTypeIcon(2,0),autoSaveGraph()))}),this.addAction("markFinalOutput",function(e){var t=i.nodeData[i.curCell.id].nodeInfo.resultTableStatus,n=i.nodeData[i.curCell.id].nodeInfo.midTableStatus,l=i.nodeData[i.curCell.id].nodeInfo.nodeExcuteStatus,o=i.nodeData[i.curCell.id].parentIds;if(i.nodeData[o[0]]&&"comparison"===i.nodeData[o[0]].nodeInfo.optType)return void alertMsg("提示","频次分析节点的结果表无法被标记","warning");if(2===l)alertMsg("提示","无法标记正在执行的节点","warning");else if(2===t)i.nodeData[i.curCell.id].nodeInfo.resultTableStatus=1,setNodeOutputTypeIcon(1,1),autoSaveGraph();else{var a=!0;if(2===n)a=!1,alertMsg("提示","该结果表已被标记为模型辅助结果表","info");else for(var d=Object.keys(i.model.cells),s=0;s<d.length;s++){var r=i.model.cells[d[s]];if(r.vertex&&(t=i.nodeData[r.id].nodeInfo.resultTableStatus,2===t&&r.id!==i.curCell.id)){alertMsg("提示","已存在被标记的模型最终结果表","info"),a=!1;break}}a&&(i.nodeData[i.curCell.id].nodeInfo.resultTableStatus=2,setNodeOutputTypeIcon(2,1),autoSaveGraph())}}),this.addAction("showCurNodeSQL",function(e){curNodeSQL()}),this.addAction("nullSqlEdit",function(e){sqlNodeEdit()}),this.addAction("switchLineStyleToStraight",function(e){var t=[mxConstants.STYLE_EDGE,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],n=[null,null,null];l.menus.edgeLineStyleToChange(t,n,!0),refrashHistoryZtree("切换连接线【"+i.curCell.value+"】为直线"),autoSaveGraph()}),this.addAction("switchLineStyleToCurved",function(e){var t=[mxConstants.STYLE_EDGE,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],n=["orthogonalEdgeStyle","1",null];l.menus.edgeLineStyleToChange(t,n,!0),refrashHistoryZtree("切换连接线【"+i.curCell.value+"】为曲线"),autoSaveGraph()}),d.setToggleAction(!0),d.setSelectedCallback(mxUtils.bind(this,function(){return null!=this.layersWindow&&this.layersWindow.window.isVisible()})),d.setToggleAction(!0),d.setSelectedCallback(mxUtils.bind(this,function(){return l.formatWidth>0})),d=this.addAction("outline",mxUtils.bind(this,function(){null==this.outlineWindow?(this.outlineWindow=new OutlineWindow(l,document.body.offsetWidth-260,100,180,180),this.outlineWindow.window.addListener("show",function(){l.fireEvent(new mxEventObject("outline"))}),this.outlineWindow.window.addListener("hide",function(){l.fireEvent(new mxEventObject("outline"))}),this.outlineWindow.window.setVisible(!0),l.fireEvent(new mxEventObject("outline"))):this.outlineWindow.window.setVisible(!this.outlineWindow.window.isVisible())}),null,null,Editor.ctrlKey+"+Shift+O"),d.setToggleAction(!0),d.setSelectedCallback(mxUtils.bind(this,function(){return null!=this.outlineWindow&&this.outlineWindow.window.isVisible()}))},Actions.prototype.addAction=function(e,t,n,l,o){var i;return"..."==e.substring(e.length-3)?(e=e.substring(0,e.length-3),i=mxResources.get(e)+"..."):i=mxResources.get(e),this.put(e,new Action(i,t,n,l,o))},Actions.prototype.put=function(e,t){return this.actions[e]=t,t},Actions.prototype.get=function(e){return this.actions[e]},mxUtils.extend(Action,mxEventSource),Action.prototype.createFunction=function(e){return e},Action.prototype.setEnabled=function(e){this.enabled!=e&&(this.enabled=e,this.fireEvent(new mxEventObject("stateChanged")))},Action.prototype.isEnabled=function(){return this.enabled},Action.prototype.setToggleAction=function(e){this.toggleAction=e},Action.prototype.setSelectedCallback=function(e){this.selectedCallback=e},Action.prototype.isSelected=function(){return this.selectedCallback()};